<!DOCTYPE html><html><head><meta charset="UTF-8"/><meta name="og:site_name" content="Hello world!"/><link rel="canonical" href="https://trampampam.github.io/about/ink"/><meta name="twitter:url" content="https://trampampam.github.io/about/ink"/><meta name="og:url" content="https://trampampam.github.io/about/ink"/><title>Ink (lib) | Hello world!</title><meta name="twitter:title" content="Ink (lib) | Hello world!"/><meta name="og:title" content="Ink (lib) | Hello world!"/><meta name="description" content="Markdown parser written in Swift. It can be used to convert Markdown-formatted strings into HTML."/><meta name="twitter:description" content="Markdown parser written in Swift. It can be used to convert Markdown-formatted strings into HTML."/><meta name="og:description" content="Markdown parser written in Swift. It can be used to convert Markdown-formatted strings into HTML."/><meta name="twitter:card" content="summary"/><link rel="stylesheet" href="/styles.css" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/images/favicon.png" type="image/png"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to Hello world!"/></head><body><header><div class="wrapper"><nav class="site-name"><a href="/">Hello world!</a></nav><br/><br/><nav><ul><li><a href="/posts">My posts</a></li><li><a href="/about">About</a></li><li><a href="/faq">FAQ</a></li></ul></nav></div></header><div class="wrapper"><article class="content"><h1>Ink (lib)</h1><p>Welcome to <strong>Ink</strong>, a fast and flexible Markdown parser written in Swift. It can be used to convert Markdown-formatted strings into HTML, and also supports metadata parsing, as well as powerful customization options for fine-grained post-processing. It was built with a focus on Swift-based web development and other HTML-centered workflows.</p><p>Ink is used to render all articles on <a href="https://swiftbysundell.com">swiftbysundell.com</a>.</p><h2>Converting Markdown into HTML</h2><p>To get started with Ink, all you have to do is to import it, and use its <code>MarkdownParser</code> type to convert any Markdown string into efficiently rendered HTML:</p><pre><code><span class="keyword">import</span> Ink

<span class="keyword">let</span> markdown: <span class="type">String</span> = ...
<span class="keyword">let</span> parser = <span class="type">MarkdownParser</span>()
<span class="keyword">let</span> html = parser.<span class="call">html</span>(from: markdown)
</code></pre><p>That’s it! The resulting HTML can then be displayed as-is, or embedded into some other context — and if that’s all you need Ink for, then no more code is required.</p><h2>Automatic metadata parsing</h2><p>Ink also comes with metadata support built-in, meaning that you can define key/value pairs at the top of any Markdown document, which will then be automatically parsed into a Swift dictionary.</p><p>To take advantage of that feature, call the <code>parse</code> method on <code>MarkdownParser</code>, which gives you a <code>Markdown</code> value that both contains any metadata found within the parsed Markdown string, as well as its HTML representation:</p><pre><code><span class="keyword">let</span> markdown: <span class="type">String</span> = ...
<span class="keyword">let</span> parser = <span class="type">MarkdownParser</span>()
<span class="keyword">let</span> result = parser.<span class="call">parse</span>(markdown)

<span class="keyword">let</span> dateString = result.<span class="property">metadata</span>[<span class="string">"date"</span>]
<span class="keyword">let</span> html = result.<span class="property">html</span>
</code></pre><p>To define metadata values within a Markdown document, use the following syntax:</p><pre><code>---
keyA: valueA
keyB: valueB
---

<span class="type">Markdown</span> text...
</code></pre><p>The above format is also supported by many different Markdown editors and other tools, even though it’s not part of the <a href="https://daringfireball.net/projects/markdown">original Markdown spec</a>.</p><h2>Powerful customization</h2><p>Besides its <a href="#markdown-syntax-supported">built-in parsing rules</a>, which aims to cover the most common features found in the various flavors of Markdown, you can also customize how Ink performs its parsing through the use of <em>modifiers</em>.</p><p>A modifier is defined using the <code>Modifier</code> type, and is associated with a given <code>Target</code>, which determines the kind of Markdown fragments that it will be used for. For example, here’s how an H3 tag could be added before each code block:</p><pre><code><span class="keyword">var</span> parser = <span class="type">MarkdownParser</span>()

<span class="keyword">let</span> modifier = <span class="type">Modifier</span>(target: .<span class="dotAccess">codeBlocks</span>) { html, markdown <span class="keyword">in
    return</span> <span class="string">"&lt;h3&gt;This is a code block:&lt;/h3&gt;"</span> + html
}

parser.<span class="call">addModifier</span>(modifier)

<span class="keyword">let</span> markdown: <span class="type">String</span> = ...
<span class="keyword">let</span> html = parser.<span class="call">html</span>(from: markdown)
</code></pre><p>Modifiers are passed both the HTML that Ink generated for the given fragment, and its raw Markdown representation as well — both of which can be used to determine how each fragment should be customized.</p><h2>Performance built-in</h2><p>Ink was designed to be as fast and efficient as possible, to enable hundreds of full-length Markdown articles to be parsed in a matter of seconds, while still offering a fully customizable API as well. Two key characteristics make this possible:</p><ol><li>Ink aims to get as close to <code>O(N)</code> complexity as possible, by minimizing the amount of times it needs to read the Markdown strings that are passed to it, and by optimizing its HTML rendering to be completely linear. While <em>true</em> <code>O(N)</code> complexity is impossible to achieve when it comes to Markdown parsing, because of its very flexible syntax, the goal is to come as close to that target as possible.</li><li>A high degree of memory efficiency is achieved thanks to Swift’s powerful <code>String</code> API, which Ink makes full use of — by using string indexes, ranges and substrings, rather than performing unnecessary string copying between its various operations.</li></ol><h2>Installation</h2><p>Ink is distributed using the <a href="https://swift.org/package-manager">Swift Package Manager</a>. To install it into a project, simply add it as a dependency within your <code>Package.swift</code> manifest:</p><pre><code><span class="keyword">let</span> package = <span class="type">Package</span>(
    ...
    dependencies: [
        .<span class="call">package</span>(url: <span class="string">"https://github.com/johnsundell/ink.git"</span>, from: <span class="string">"0.1.0"</span>)
    ],
    ...
)
</code></pre><p>Then import Ink wherever you’d like to use it:</p><pre><code><span class="keyword">import</span> Ink
</code></pre><p>For more information on how to use the Swift Package Manager, check out <a href="https://www.swiftbysundell.com/articles/managing-dependencies-using-the-swift-package-manager">this article</a>, or <a href="https://github.com/apple/swift-package-manager/tree/master/Documentation">its official documentation</a>.</p><h2>Command line tool</h2><p>Ink also ships with a simple but useful command line tool that lets you convert Markdown to HTML directly from the command line.</p><p>To install it, clone the project and run <code>make</code>:</p><pre><code>$ git clone https://github.<span class="property">com</span>/johnsundell/<span class="type">Ink</span>.<span class="property">git</span>
$ cd <span class="type">Ink</span>
$ make
</code></pre><p>The command line tool will be installed as <code>ink</code>, and can be passed Markdown text for conversion into HTML in several ways.</p><p>Calling it without arguments will start reading from <code>stdin</code> until terminated with <code>Ctrl+D</code>:</p><pre><code>$ ink
</code></pre><p>Markdown text can be piped in when <code>ink</code> is called without arguments:</p><pre><code>$ echo <span class="string">"*Hello World*"</span> | ink
</code></pre><p>A single argument is treated as a filename, and the corresponding file will be parsed:</p><pre><code>$ ink file.<span class="property">md</span>
</code></pre><p>A Markdown string can be passed directly using the <code>-m</code> or <code>--markdown</code> flag:</p><pre><code>$ ink -m <span class="string">"*Hello World*"</span>
</code></pre><p>You can of course also build your own command line tools that utilizes Ink in more advanced ways by importing it as a package.</p><h2>Markdown syntax supported</h2><p>Ink supports the following Markdown features:</p><ul><li>Headings (H1 - H6), using leading pound signs, for example <code>## H2</code>.</li><li>Italic text, by surrounding a piece of text with either an asterisk (<code>*</code>), or an underscore (<code>_</code>). For example <code>*Italic text*</code>.</li><li>Bold text, by surrounding a piece of text with either two asterisks (<code>**</code>), or two underscores (<code>__</code>). For example <code>**Bold text**</code>.</li><li>Text strikethrough, by surrounding a piece of text with two tildes (<code>~~</code>), for example <code>~~Strikethrough text~~</code>.</li><li>Inline code, marked with a backtick on either site of the code.</li><li>Code blocks, marked with three or more backticks both above and below the block.</li><li>Links, using the following syntax: <code>[Title](url)</code>.</li><li>Images, using the following syntax: <code>![Alt text](image-url)</code>.</li><li>Both images and links can also use reference URLs, which can be defined anywhere in a Markdown document using this syntax: <code>[referenceName]: url</code>.</li><li>Both ordered lists (using numbers followed by a period (<code>.</code>) or right parenthesis (<code>)</code>) as bullets) and unordered lists (using either a dash (<code>-</code>), plus (<code>+</code>), or asterisk (<code>*</code>) as bullets) are supported.</li><li>Ordered lists start from the index of the first entry</li><li>Nested lists are supported as well, by indenting any part of a list that should be nested within its parent.</li><li>Horizontal lines can be placed using either three asterisks (<code>***</code>) or three dashes (<code>---</code>) on a new line.</li><li>HTML can be inlined both at the root level, and within text paragraphs.</li><li>Blockquotes can be created by placing a greater-than arrow at the start of a line, like this: <code>&gt; This is a blockquote</code>.</li></ul><p>Please note that, being a very young implementation, Ink does not fully support all Markdown specs, such as <a href="https://commonmark.org">CommonMark</a>. Ink definitely aims to cover as much ground as possible, and to include support for the most commonly used Markdown features, but if complete CommonMark compatibility is what you’re looking for — then you might want to check out tools like <a href="https://github.com/commonmark/cmark">CMark</a>.</p><h2>Internal architecture</h2><p>Ink uses a highly modular <a href="https://www.swiftbysundell.com/articles/rule-based-logic-in-swift">rule-based</a> internal architecture, to enable new rules and formatting options to be added without impacting the system as a whole.</p><p>Each Markdown fragment is individually parsed and rendered by a type conforming to the internal <code>Readable</code> and <code>HTMLConvertible</code> protocols — such as <code>FormattedText</code>, <code>List</code>, and <code>Image</code>.</p><p>To parse a part of a Markdown document, each fragment type uses a <code>Reader</code> instance to read the Markdown string, and to make assertions about its structure. Errors are <a href="https://www.swiftbysundell.com/articles/using-errors-as-control-flow-in-swift">used as control flow</a> to signal whether a parsing operation was successful or not, which in turn enables the parent context to decide whether to advance the current <code>Reader</code> instance, or whether to rewind it.</p><p>A good place to start exploring Ink’s implementation is to look at the main <code>MarkdownParser</code> type’s <code>parse</code> method, and to then dive deeper into the various <code>Fragment</code> implementations, and the <code>Reader</code> type.</p><h2>Credits</h2><p>Ink was originally written by <a href="https://twitter.com/johnsundell">John Sundell</a> as part of the Publish suite of static site generation tools, which is used to build and generate <a href="https://swiftbysundell.com">Swift by Sundell</a>. The other tools that make up the Publish suite will also be open sourced soon.</p><p>The Markdown format was created by <a href="https://twitter.com/gruber">John Gruber</a>. You can find <a href="https://daringfireball.net/projects/markdown">more information about it here</a>.</p><h2>Contributions and support</h2><p>Ink is developed completely in the open, and your contributions are more than welcome.</p><p>Before you start using Ink in any of your projects, it’s highly recommended that you spend a few minutes familiarizing yourself with its documentation and internal implementation, so that you’ll be ready to tackle any issues or edge cases that you might encounter.</p><p>Since this is a very young project, it’s likely to have many limitations and missing features, which is something that can really only be discovered and addressed as more people start using it. While Ink is used in production to render all of <a href="https://swiftbysundell.com">Swift by Sundell</a>, it’s recommended that you first try it out for your specific use case, to make sure it supports the features that you need.</p><p>This project does not come with GitHub Issues-based support, and users are instead encouraged to become active participants in its continued development — by fixing any bugs that they encounter, or by improving the documentation wherever it’s found to be lacking.</p><p>If you wish to make a change, <a href="https://github.com/JohnSundell/Ink/pull/new">open a Pull Request</a> — even if it just contains a draft of the changes you’re planning, or a test that reproduces an issue — and we can discuss it further from there.</p><p>Hope you’ll enjoy using <strong>Ink</strong>!</p></article></div><footer>Hello</footer></body></html>